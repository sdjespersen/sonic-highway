(self["webpackChunk_canva_web"] = self["webpackChunk_canva_web"] || []).push([[60060],{

/***/ 82986:
function(_, __, __webpack_require__) {__webpack_require__.n_x = __webpack_require__.n;const __web_req__ = __webpack_require__;__web_req__(813110);__web_req__(914242);self._7ccc7343da2ae983607b3819c7bc1f93 = self._7ccc7343da2ae983607b3819c7bc1f93 || {};(function(__c) {var wM=__c.wM;var W=__c.W;var L=__c.L;var Ia=__c.Ia;var bZb,eZb,hZb,iZb,jZb,lZb,oZb,nZb,uZb,sZb,xZb,CZb;__c.O5=function(a,b,c){return{key:a,MVa:b,type:"string",mL:c,PSa:0}};bZb=function(){return new __c.P5({id:"w:demo-blueprint",yN:$Yb,VB:({data:a})=>{var b=aZb.get(a.yma);if(!b)throw Error(`Blueprint ${a.yma} not found`);b=b.variants.find(c=>c.rR===a.rR);if(!b)throw Error(`Variant ${a.rR} not found for blueprint ${a.yma}`);return{cb:b.cb}}})};
eZb=function(a,b){var c=cZb,d=dZb;a.handle("SET_CONFIG",async e=>{if(e===void 0)throw new Q5({code:"internal_error",message:"SET_CONFIG: request cannot be undefined."});e=c.kd(e);e=await b(e);if(d)return d.Hd(e)})};hZb=async function(a,b){a=await a.VIa.request("RENDER_ELEMENT",fZb.Hd(b));if(!a.ok)throw Error(`Encountered an error while sending ${"RENDER_ELEMENT"} request: ${a.error}`);if(a.value==null)throw Error("RENDER_ELEMENT: Result cannot be empty");return gZb.kd(a.value)};
iZb=function(a){eZb(a.VIa,b=>a.handler.vfb(b))};
jZb=async function(a,b){const c=b.requestId,d=b.path;b=b.Xm;const e=a.requestHandler.get(d);if(e){a.sendMessage({type:"ack",requestId:c});var f=setInterval(()=>a.sendMessage({type:"ack",requestId:c}),9E3);try{var g=await e(b);clearInterval(f);a.sendMessage({type:"response",requestId:c,Xm:g})}catch(k){clearInterval(f);g={code:"internal_error",type:"error",message:"Something went wrong on our end, if this issue persists please contact us.",requestId:c};if(k instanceof Q5){var h=k;k.code==="internal_error"?
a.H.Nb(k,{Ve:"Internal error in comms handler",tags:new Map([["type","request"],["path",d]])}):(g.code=k.code,g.message=k.Qob)}else a.xpb?a.H.Nb(k,{Ve:"Unexpected error type thrown from comms handler",tags:new Map([["type","request"],["path",d]])}):a.iab.error(k);g=a.sendMessage(g);g.ok||a.H.tN(g.error,{Ve:"unable to send error response",tags:new Map([["type","request"],["path",d]])})}if(h!=null)for(const k of a.gcb)try{k(h)}catch(l){a.H.CR(l,{Ve:"Error executing errorObserver"})}}else h=a.sendMessage({type:"error",
requestId:c,code:"internal_error",message:`No request handler configured for path: "${d}".`}),h.ok||a.H.tN(h.error,{Ve:"unable to send error response",tags:new Map([["type","request"],["path",d]])})};lZb=function({src:a,srcdoc:b,sandbox:c}){if(b.length!==0||!c.contains("allow-same-origin"))return kZb;a=(new URL(a)).origin;return a==="null"?kZb:{hDa:a,bYa:a}};
oZb=async function(a,b,c,{addEventListener:d,removeEventListener:e}=window){const f=new mZb(6E4),g=lZb(c),h=c.contentWindow;if(!h)throw new Q5({code:"internal_error",message:"contentWindow is missing from iFrame"});c=({data:k,source:l,origin:m})=>{var n;(k===null||k===void 0?0:(n=k.source)===null||n===void 0?0:n.startsWith("react-"))||(m!==g.hDa?nZb(m)||b.info("received message event from an unexpected origin",{extra:new Map([["expected",g.hDa],["actual",m]])}):l!==h?l!==window&&b.info("source and content window do not match",
{extra:new Map([["data.source",k===null||k===void 0?void 0:k.source]])}):(l=k?k.source?k.source!=="iframe"?Ia("invalid source"):(0,__c.Ha)():Ia("'source' is missing in MessageEvent data object"):Ia("missing 'data' field in MessageEvent"),l.ok?(h.postMessage({source:"parent"},g.bYa,[a]),f.resolve(void 0)):b.pM(l.error,{extra:new Map([["data.source",k===null||k===void 0?void 0:k.source]])})))};d("message",c);try{await f.promise()}finally{e("message",c)}};nZb=function(a){return pZb.some(b=>a.endsWith(b))};
uZb=async function(a,b,c){const {port1:d,port2:e}=new MessageChannel;var f=new qZb(d,a.H);await oZb(e,a.H,b,window);const g=new rZb(f,{vfb:h=>{R5(()=>{const k=h.width,l=h.height;c.vra.qh.set("config",{type:"string",value:h.config});sZb(c,{width:k,height:l})});return new dZb}});f=tZb(()=>c.vra.qh.get("config"),async h=>{let k;h&&(__c.C(h.type==="string"),k=h.value);const {width:l,height:m}=await hZb(g,{config:k});R5(()=>{sZb(c,{width:l,height:m})})},{fireImmediately:!0});a.Oh.set(b,f)};
sZb=function(a,b){const c=a.jbb,d=a.vra,e=b.width,f=b.height;if(!(e<0||f<0)){var g=d.height,h=e/f*g;R5(()=>{c.width=h;c.height=g;c.I=e;c.V=f;d.width=h;d.I=h;d.V=g})}};
xZb=function({Bpa:a,H:b}){const c=new vZb(b);a&&(a.fD=async(d,{element:e,container:f})=>{(f===null||f===void 0?void 0:f.type)==="group-element"&&__c.pj(f.group)&&f.group.$e.app.id==="w:codelet"&&(__c.C((e===null||e===void 0?void 0:e.type)==="embed"),uZb(c,d,{jbb:e,vra:f.group}))},a.VV=d=>{var e;(e=c.Oh.get(d))===null||e===void 0||e();c.Oh.delete(d)});return wZb};CZb=function(){return new __c.P5({id:"w:demo-form",yN:yZb,Component:zZb(({data:a})=>AZb(BZb,{state:a}))})};
__c.jd.prototype.tN=__c.fa(3,function(a,b){this.console.error(...__c.id(this,"critical",a,b))});__c.YL.prototype.tN=__c.fa(2,function(a,b){this.Bu.tN(a,b);__c.WL(this,a,"critical",b)});var S5=__webpack_require__(519427),DZb=S5.ObservableMap,tZb=S5.reaction,R5=S5.runInAction;var AZb=__webpack_require__(443763).jsx;var EZb=__webpack_require__(875604).memo;var zZb=__webpack_require__(446474).Pi;__c.P5=class{get id(){return this.config.id}map(a){return a(this.config)}constructor(a){this.config={...a}}};var aZb=new DZb,$Yb={yma:__c.O5("blueprintId",0),rR:__c.O5("variantId",0)};var Q5=class extends Error{constructor(a){a.code=a.code;const b=a.message.endsWith(".")?"":".";super(`[${a.code}]:  ${a.message}${b}`.trim());this.code=a.code;this.name="CanvaError";this.Qob=a.message;Object.setPrototypeOf(this,Q5.prototype)}};var fZb=L(()=>({config:__c.Y(1)}));var FZb=L(()=>({color:W(1)}));var GZb=L(()=>({type:__c.F("A?",1,"RECOLORABLE"),id:W(1),value:__c.Sa(2,FZb)}));var HZb=L(()=>({borderRadius:wM(1),borderWidth:wM(2)}));var IZb=L(()=>({type:__c.F("A?",2,"BORDERABLE"),id:W(1),value:__c.Sa(2,HZb)}));var gZb=L(()=>({config:W(1),width:wM(2),height:wM(3),EW:__c.Ta(4,GZb),F7a:__c.Ta(5,IZb)}));var cZb=L(()=>({config:W(1),width:wM(2),height:wM(3),EW:__c.Ta(4,GZb),F7a:__c.Ta(5,IZb)}));var dZb=L(()=>({}));var rZb=class{constructor(a,b){this.VIa=a;this.handler=b;iZb(this)}};var JZb=class{constructor(a,b,c){this.handler=a;this.port=b;this.H=c;this.send=d=>{try{return this.port.postMessage(d),(0,__c.Ha)()}catch(e){return this.H.Nb(e),Ia(e)}};this.pmb=d=>{this.H.Nb(d)};this.onMessage=({data:d})=>{if(d)try{this.handler.oxa(d)}catch(e){this.H.Nb(e)}else this.H.error(new Q5({code:"internal_error",message:"missing data in 'MessageEvent'"}))};this.port.onmessage=this.onMessage;this.port.onmessageerror=this.pmb}};var T5=new Q5({code:"internal_error",message:"Comms promise timed out."}),mZb=class{reset(a){a&&(this.timeoutMs=a);this.setTimeout()}resolve(a){clearTimeout(this.Vd);this.Fpb(a)}reject(a){clearTimeout(this.Vd);this.KWa(a)}promise(){return this.p}setTimeout(){clearTimeout(this.Vd);this.Vd=setTimeout(()=>{this.KWa(T5)},this.timeoutMs)}constructor(a){this.timeoutMs=a;this.p=new Promise((b,c)=>{this.Fpb=b;this.KWa=c});this.setTimeout()}};var KZb=class{request(a,b){const c=this.pVa,d=new mZb(5E3),e=this.zpb(),f=async function(){c.set(e,d);try{const h=await d.promise();return(0,__c.Ha)(h)}catch(h){return h===T5?Ia(new Q5({code:T5.code,message:`Comms promise timed out (${a}).`})):Ia(h)}finally{c.delete(e)}}();b={type:"request",requestId:e,path:a,Xm:b};const g=this.send(b);g.ok||(this.H.Nb(g.error,{Ve:"unable to send request",tags:new Map([["type",b.type],["path",a]])}),d.reject(g.error));return f}constructor(a,b){this.send=a;this.H=
b;this.zpb=__c.Tr;this.pVa=new Map}};var LZb=class{handle(a,b){if(this.requestHandler.has(a))throw new Q5({code:"internal_error",message:`Handler for '${a}' is already defined.`});this.requestHandler.set(a,b)}constructor(a,b){var c=console;this.sendMessage=a;this.H=b;this.xpb=!0;this.iab=c;this.requestHandler=new Map;this.gcb=new Set}};var qZb=class{oxa(a){switch(a.type){case "ack":case "error":case "response":var b=this.client;const c=a.requestId,d=a.type,e=b.pVa.get(c);if(e)switch(d){case "response":e.resolve(a.Xm);break;case "ack":e.reset(2E4);break;case "error":e.reject(new Q5({code:a.code,message:a.message}));break;default:throw new __c.E(a);}else d!=="ack"&&b.H.error("request has already been handled and resolved or was not sent from this client",{tags:new Map([["type",d],["requestId",`${c}`]])});break;case "request":jZb(this.requestHandler,
a);break;default:throw new __c.E(a);}}constructor(a,b){this.request=(c,d)=>this.client.request(c,d);this.handle=(c,d)=>this.requestHandler.handle(c,d);this.OHa=new JZb({oxa:c=>this.oxa(c)},a,b.Tg("bus"));this.client=new KZb(this.OHa.send,b.Tg("client"));this.requestHandler=new LZb(this.OHa.send,b.Tg("requestHandler"))}};var kZb={hDa:"null",bYa:"*"};var pZb="canva-dev.com canva-dev.cn canva-staging.com canva-staging.cn canva.com canva.cn canva-apps.com canva-apps.cn canva-apps-dev.com canva-apps-dev.cn canva-apps-staging.com canva-apps-staging.cn".split(" ");var vZb=class{constructor(a){this.H=a;this.Oh=new Map}};var wZb=new __c.P5({id:"w:codelet",yN:{url:__c.O5("url",0,/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[/?#]\S*)?$/i),config:__c.O5("config",
1)},VB:({data:a})=>({cb:__c.OP.create([{...__c.Bdb,top:0,left:0,width:510,height:191.25,I:800,V:300,url:a.url}])})});var BZb=EZb(function(){return AZb("div",{style:{width:"100%",height:"100%",display:"flex",backgroundColor:"#fFfFfF",justifyContent:"center",alignItems:"center"},children:"FORM V2 Widget"})});var yZb={};__c.yQa={Rgb:function({J7:a,Bpa:b,H:c,rbb:d}){[xZb({Bpa:b,H:c}),CZb(),bZb()].forEach(e=>a.aPa(e));d&&__webpack_require__.me(345045).then(()=>__c.MZb).then(({cab:e})=>{e.forEach(f=>a.aPa(f))})}};
}).call(self, self._7ccc7343da2ae983607b3819c7bc1f93);}

}])
//# sourceMappingURL=sourcemaps/bf07148b30cf0e9c.js.map